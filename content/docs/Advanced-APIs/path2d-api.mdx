# Path2D API

Apexify.js provides an advanced Path2D API for creating and drawing complex paths programmatically. Full Canvas Path2D compatibility with extended shape commands and styling options.

## Overview

The Path2D API includes:

- **`createPath2D()`** - Create Path2D objects from command arrays
- **`drawPath()`** - Draw paths with advanced styling (stroke, fill, transforms)
- **Command Set** - Comprehensive path commands including standard Canvas commands and extended shape commands

## Creating Paths

Create paths using command arrays:

<CodeSwitcher>
<ts>
```typescript
import { ApexPainter } from 'apexify.js';

const painter = new ApexPainter();

// Create a simple path with basic commands
const path = painter.createPath2D([
  { type: 'moveTo', x: 100, y: 100 },
  { type: 'lineTo', x: 200, y: 100 },
  { type: 'lineTo', x: 200, y: 200 },
  { type: 'lineTo', x: 100, y: 200 },
  { type: 'closePath' }
]);

// Draw the path
const result = await painter.drawPath(canvasBuffer, path, {
  fill: { color: '#ff6b6b' },
  stroke: { color: '#000000', width: 2 }
});
```
</ts>
<js>
```javascript
const { ApexPainter } = require('apexify.js');

const painter = new ApexPainter();

async function createPath() {
  // Create a simple path with basic commands
  const path = painter.createPath2D([
    { type: 'moveTo', x: 100, y: 100 },
    { type: 'lineTo', x: 200, y: 100 },
    { type: 'lineTo', x: 200, y: 200 },
    { type: 'lineTo', x: 100, y: 200 },
    { type: 'closePath' }
  ]);

  // Draw the path
  const result = await painter.drawPath(canvasBuffer, path, {
    fill: { color: '#ff6b6b' },
    stroke: { color: '#000000', width: 2 }
  });
}

createPath();
```
</js>
</CodeSwitcher>

## Standard Path Commands

All standard Canvas Path2D commands are supported:

<CodeSwitcher>
<ts>
```typescript
const path = painter.createPath2D([
  // Move to a point
  { type: 'moveTo', x: 100, y: 100 },
  
  // Draw line
  { type: 'lineTo', x: 200, y: 200 },
  
  // Arc
  { type: 'arc', x: 300, y: 300, radius: 50, startAngle: 0, endAngle: Math.PI * 2 },
  
  // Arc to
  { type: 'arcTo', x1: 100, y1: 200, x2: 200, y2: 200, radius: 20 },
  
  // Quadratic curve
  { type: 'quadraticCurveTo', cpx: 150, cpy: 150, x: 200, y: 200 },
  
  // Bezier curve
  { type: 'bezierCurveTo', cp1x: 100, cp1y: 100, cp2x: 200, cp2y: 100, x: 300, y: 200 },
  
  // Rectangle
  { type: 'rect', x: 50, y: 50, width: 100, height: 100 },
  
  // Ellipse
  { type: 'ellipse', x: 200, y: 200, radiusX: 75, radiusY: 50, rotation: Math.PI / 4 },
  
  // Close path
  { type: 'closePath' }
]);
```
</ts>
<js>
```javascript
const path = painter.createPath2D([
  // Move to a point
  { type: 'moveTo', x: 100, y: 100 },
  
  // Draw line
  { type: 'lineTo', x: 200, y: 200 },
  
  // Arc
  { type: 'arc', x: 300, y: 300, radius: 50, startAngle: 0, endAngle: Math.PI * 2 },
  
  // Arc to
  { type: 'arcTo', x1: 100, y1: 200, x2: 200, y2: 200, radius: 20 },
  
  // Quadratic curve
  { type: 'quadraticCurveTo', cpx: 150, cpy: 150, x: 200, y: 200 },
  
  // Bezier curve
  { type: 'bezierCurveTo', cp1x: 100, cp1y: 100, cp2x: 200, cp2y: 100, x: 300, y: 200 },
  
  // Rectangle
  { type: 'rect', x: 50, y: 50, width: 100, height: 100 },
  
  // Ellipse
  { type: 'ellipse', x: 200, y: 200, radiusX: 75, radiusY: 50, rotation: Math.PI / 4 },
  
  // Close path
  { type: 'closePath' }
]);
```
</js>
</CodeSwitcher>

## Extended Shape Commands

Advanced shape commands for common shapes:

<CodeSwitcher>
<ts>
```typescript
// Circle
const circlePath = painter.createPath2D([
  { type: 'circle', x: 200, y: 200, radius: 50 }
]);

// Rounded rectangle with uniform radius
const roundedRect1 = painter.createPath2D([
  { type: 'roundedRect', x: 100, y: 100, width: 200, height: 150, radius: 20 }
]);

// Rounded rectangle with per-corner radius
const roundedRect2 = painter.createPath2D([
  {
    type: 'roundedRect',
    x: 100,
    y: 100,
    width: 200,
    height: 150,
    radius: {
      tl: 20,  // Top-left
      tr: 30,  // Top-right
      br: 40,  // Bottom-right
      bl: 10   // Bottom-left
    }
  }
]);

// Polygon
const polygonPath = painter.createPath2D([
  {
    type: 'polygon',
    points: [
      { x: 200, y: 50 },
      { x: 300, y: 150 },
      { x: 250, y: 250 },
      { x: 150, y: 250 },
      { x: 100, y: 150 }
    ]
  }
]);

// Star
const starPath = painter.createPath2D([
  { type: 'star', x: 200, y: 200, outerRadius: 80, innerRadius: 40, points: 5 }
]);

// Arrow
const arrowPath = painter.createPath2D([
  { type: 'arrow', x: 100, y: 200, length: 200, angle: Math.PI / 4 }
]);
```
</ts>
<js>
```javascript
// Circle
const circlePath = painter.createPath2D([
  { type: 'circle', x: 200, y: 200, radius: 50 }
]);

// Rounded rectangle with uniform radius
const roundedRect1 = painter.createPath2D([
  { type: 'roundedRect', x: 100, y: 100, width: 200, height: 150, radius: 20 }
]);

// Rounded rectangle with per-corner radius
const roundedRect2 = painter.createPath2D([
  {
    type: 'roundedRect',
    x: 100,
    y: 100,
    width: 200,
    height: 150,
    radius: {
      tl: 20,  // Top-left
      tr: 30,  // Top-right
      br: 40,  // Bottom-right
      bl: 10   // Bottom-left
    }
  }
]);

// Polygon
const polygonPath = painter.createPath2D([
  {
    type: 'polygon',
    points: [
      { x: 200, y: 50 },
      { x: 300, y: 150 },
      { x: 250, y: 250 },
      { x: 150, y: 250 },
      { x: 100, y: 150 }
    ]
  }
]);

// Star
const starPath = painter.createPath2D([
  { type: 'star', x: 200, y: 200, outerRadius: 80, innerRadius: 40, points: 5 }
]);

// Arrow
const arrowPath = painter.createPath2D([
  { type: 'arrow', x: 100, y: 200, length: 200, angle: Math.PI / 4 }
]);
```
</js>
</CodeSwitcher>

## Drawing Paths with Styling

Draw paths with fill and stroke options:

<CodeSwitcher>
<ts>
```typescript
// Fill only
const filled = await painter.drawPath(canvasBuffer, path, {
  fill: {
    color: '#ff6b6b',
    opacity: 1.0
  }
});

// Stroke only
const stroked = await painter.drawPath(canvasBuffer, path, {
  stroke: {
    color: '#000000',
    width: 3,
    lineCap: 'round',
    lineJoin: 'round',
    miterLimit: 10
  }
});

// Fill and stroke
const filledAndStroked = await painter.drawPath(canvasBuffer, path, {
  fill: {
    color: '#ff6b6b',
    opacity: 0.8,
    rule: 'nonzero'  // or 'evenodd'
  },
  stroke: {
    color: '#000000',
    width: 2,
    lineCap: 'butt',  // 'butt' | 'round' | 'square'
    lineJoin: 'miter',  // 'bevel' | 'round' | 'miter'
    miterLimit: 10,
    dashArray: [10, 5],  // Dash pattern
    dashOffset: 0,
    opacity: 1.0
  }
});
```
</ts>
<js>
```javascript
// Fill only
const filled = await painter.drawPath(canvasBuffer, path, {
  fill: {
    color: '#ff6b6b',
    opacity: 1.0
  }
});

// Stroke only
const stroked = await painter.drawPath(canvasBuffer, path, {
  stroke: {
    color: '#000000',
    width: 3,
    lineCap: 'round',
    lineJoin: 'round',
    miterLimit: 10
  }
});

// Fill and stroke
const filledAndStroked = await painter.drawPath(canvasBuffer, path, {
  fill: {
    color: '#ff6b6b',
    opacity: 0.8,
    rule: 'nonzero'  // or 'evenodd'
  },
  stroke: {
    color: '#000000',
    width: 2,
    lineCap: 'butt',  // 'butt' | 'round' | 'square'
    lineJoin: 'miter',  // 'bevel' | 'round' | 'miter'
    miterLimit: 10,
    dashArray: [10, 5],  // Dash pattern
    dashOffset: 0,
    opacity: 1.0
  }
});
```
</js>
</CodeSwitcher>

## Transform Options

Apply transformations when drawing paths:

<CodeSwitcher>
<ts>
```typescript
// Translate, rotate, and scale
const transformed = await painter.drawPath(canvasBuffer, path, {
  fill: { color: '#ff6b6b' },
  transform: {
    translateX: 100,
    translateY: 100,
    rotate: 45,  // degrees
    scaleX: 1.5,
    scaleY: 1.5,
    originX: 200,  // Rotation/scale origin
    originY: 200
  }
});
```
</ts>
<js>
```javascript
// Translate, rotate, and scale
const transformed = await painter.drawPath(canvasBuffer, path, {
  fill: { color: '#ff6b6b' },
  transform: {
    translateX: 100,
    translateY: 100,
    rotate: 45,  // degrees
    scaleX: 1.5,
    scaleY: 1.5,
    originX: 200,  // Rotation/scale origin
    originY: 200
  }
});
```
</js>
</CodeSwitcher>

## Drawing Command Arrays Directly

You can also pass command arrays directly to `drawPath()`:

<CodeSwitcher>
<ts>
```typescript
// Draw directly from command array (no need to create Path2D first)
const result = await painter.drawPath(canvasBuffer, [
  { type: 'moveTo', x: 100, y: 100 },
  { type: 'lineTo', x: 200, y: 100 },
  { type: 'lineTo', x: 200, y: 200 },
  { type: 'closePath' }
], {
  fill: { color: '#ff6b6b' }
});
```
</ts>
<js>
```javascript
// Draw directly from command array (no need to create Path2D first)
const result = await painter.drawPath(canvasBuffer, [
  { type: 'moveTo', x: 100, y: 100 },
  { type: 'lineTo', x: 200, y: 100 },
  { type: 'lineTo', x: 200, y: 200 },
  { type: 'closePath' }
], {
  fill: { color: '#ff6b6b' }
});
```
</js>
</CodeSwitcher>

## Complex Path Example

<CodeSwitcher>
<ts>
```typescript
import { ApexPainter } from 'apexify.js';
import fs from 'fs';

const painter = new ApexPainter();

async function complexPathExample() {
  const canvas = await painter.createCanvas({
    width: 800,
    height: 600,
    colorBg: '#ffffff'
  });

  // Create a complex path with multiple shapes
  const complexPath = painter.createPath2D([
    // Start with a rounded rectangle
    {
      type: 'roundedRect',
      x: 100,
      y: 100,
      width: 200,
      height: 150,
      radius: { tl: 20, tr: 20, br: 20, bl: 20 }
    },
    // Add a circle
    { type: 'circle', x: 400, y: 175, radius: 75 },
    // Add a star
    { type: 'star', x: 600, y: 175, outerRadius: 60, innerRadius: 30, points: 5 },
    // Add custom bezier curve
    {
      type: 'bezierCurveTo',
      cp1x: 200,
      cp1y: 300,
      cp2x: 400,
      cp2y: 300,
      x: 600,
      y: 400
    }
  ]);

  // Draw with styling
  const result = await painter.drawPath(canvas.buffer, complexPath, {
    fill: {
      color: '#667eea',
      opacity: 0.7,
      rule: 'nonzero'
    },
    stroke: {
      color: '#764ba2',
      width: 3,
      lineCap: 'round',
      lineJoin: 'round',
      dashArray: [10, 5],
      opacity: 1.0
    },
    transform: {
      translateX: 0,
      translateY: 0,
      rotate: 0,
      scaleX: 1,
      scaleY: 1
    }
  });

  fs.writeFileSync('complex-path.png', result);
}

complexPathExample();
```
</ts>
<js>
```javascript
const { ApexPainter } = require('apexify.js');
const fs = require('fs');

const painter = new ApexPainter();

async function complexPathExample() {
  const canvas = await painter.createCanvas({
    width: 800,
    height: 600,
    colorBg: '#ffffff'
  });

  // Create a complex path with multiple shapes
  const complexPath = painter.createPath2D([
    // Start with a rounded rectangle
    {
      type: 'roundedRect',
      x: 100,
      y: 100,
      width: 200,
      height: 150,
      radius: { tl: 20, tr: 20, br: 20, bl: 20 }
    },
    // Add a circle
    { type: 'circle', x: 400, y: 175, radius: 75 },
    // Add a star
    { type: 'star', x: 600, y: 175, outerRadius: 60, innerRadius: 30, points: 5 },
    // Add custom bezier curve
    {
      type: 'bezierCurveTo',
      cp1x: 200,
      cp1y: 300,
      cp2x: 400,
      cp2y: 300,
      x: 600,
      y: 400
    }
  ]);

  // Draw with styling
  const result = await painter.drawPath(canvas.buffer, complexPath, {
    fill: {
      color: '#667eea',
      opacity: 0.7,
      rule: 'nonzero'
    },
    stroke: {
      color: '#764ba2',
      width: 3,
      lineCap: 'round',
      lineJoin: 'round',
      dashArray: [10, 5],
      opacity: 1.0
    },
    transform: {
      translateX: 0,
      translateY: 0,
      rotate: 0,
      scaleX: 1,
      scaleY: 1
    }
  });

  fs.writeFileSync('complex-path.png', result);
}

complexPathExample();
```
</js>
</CodeSwitcher>

## Next Steps

- [Hit Detection API](/docs#hit-detection-api) - Point-in-path detection for interactive graphics
- [Text Metrics API](/docs#text-metrics-api) - Text measurement and positioning
- [Pixel Data API](/docs#pixel-data-api) - Pixel-level manipulation
- [Shapes](/docs#shapes) - Built-in shape types


